(this["webpackJsonpmy-app"]=this["webpackJsonpmy-app"]||[]).push([[9],{205:function(e,t,n){"use strict";n.r(t);var a=n(4),c=n(109),r=n(160),s=n(128),i=n.n(s),o=n(129),l=n(37),j=n(0),u=n(3),d=n(24),b=n.n(d),O=n(193),m=n(189),f=n(194),p=n(198),h=n(197),x=n(195),g=n(196),v=n(186),w=n(188),R=n(199),y=n(101),S=n(127),k=n(203);var N=function(e){var t=function(t){e.setData(Object(c.a)(Object(c.a)({},e.data),{},Object(S.a)({},t.target.name,t.target.value)))};return Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(v.a,{variant:"h3",children:"Agregar Producto"}),Object(a.jsxs)("form",{className:e.styles.root,noValidate:!0,autoComplete:"off",onSubmit:function(t){t.preventDefault(),b.a.post(e.baseURL,e.data,e.header).then((function(n){console.log(n),console.log(e.data),e.setRows(e.rows.concat(n.data)),t.target.reset(),e.setSnackAdd(!0)})).catch((function(e){console.log(e)}))},children:[Object(a.jsx)(k.a,{className:e.styles.mg,id:"outlined-basic",label:"Producto",variant:"outlined",name:"name",onChange:t}),Object(a.jsx)(k.a,{className:e.styles.mg,id:"outlined-basic",label:"Precio",variant:"outlined",name:"price",onChange:t}),Object(a.jsx)(k.a,{className:e.styles.mg,id:"outlined-basic",label:"Referencia",variant:"outlined",name:"reference",onChange:t}),Object(a.jsx)(m.a,{className:e.styles.mg,variant:"contained",color:"primary",type:"submit",size:"large",children:"Guardar"})]})]})};var C=function(e){var t=function(){var t=Object(o.a)(i.a.mark((function t(n){return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n.preventDefault(),t.next=3,b.a.put("".concat(e.baseURL+e.selRow.id,"/"),e.selRow,e.header).then((function(){var t=e.rows;t=t.map((function(t){return e.selRow.id===t.id&&(t.name=e.selRow.name,t.price=e.selRow.price,t.reference=e.selRow.reference),t})),console.table(t),e.setRows(t),e.setSnackEdit(!0)})).catch((function(e){console.log(e)}));case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),n=function(t){e.setSelRow(Object(c.a)(Object(c.a)({},e.selRow),{},Object(S.a)({},t.target.name,t.target.value)))};return Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(v.a,{variant:"h3",children:"Modificar Producto"}),Object(a.jsxs)("form",{className:e.styles.root,noValidate:!0,autoComplete:"off",onSubmit:t,children:[Object(a.jsx)(k.a,{className:e.styles.mg,id:"outlined-basic",label:"Producto",variant:"outlined",name:"name",onChange:n,value:e.selRow.name}),Object(a.jsx)(k.a,{className:e.styles.mg,id:"outlined-basic",label:"Precio",variant:"outlined",name:"price",onChange:n,value:e.selRow.price}),Object(a.jsx)(k.a,{className:e.styles.mg,id:"outlined-basic",label:"Referencia",variant:"outlined",name:"reference",onChange:n,value:e.selRow.reference}),Object(a.jsx)(m.a,{className:e.styles.mg,variant:"contained",color:"primary",type:"submit",size:"large",children:"Guardar"})]})]})},F=n(190),D=n(191),P=n(210),E=n(98);function L(e){var t=function(){var t=Object(o.a)(i.a.mark((function t(){return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,b.a.delete("".concat(e.baseURL+e.selRow.id,"/"),e.header).then((function(t){e.setRows(e.rows.filter((function(t){return t.id!==e.selRow.id}))),e.setOpen(!1),e.setSnack(!0)}));case 2:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();return Object(a.jsx)(a.Fragment,{children:Object(a.jsxs)(P.a,{open:e.open,children:[Object(a.jsx)(F.a,{children:Object(a.jsx)(E.a,{container:!0,children:Object(a.jsx)(E.a,{item:!0,xs:12,children:Object(a.jsxs)(v.a,{variant:"h3",component:"h2",align:"center",children:["\xbfDeseas eliminar"," ","".concat(e.selRow.name," ").concat(e.selRow.reference),"?"]})})})}),Object(a.jsxs)(D.a,{children:[Object(a.jsx)(m.a,{onClick:function(){return t()},color:"primary",children:"Si"}),Object(a.jsx)(m.a,{onClick:function(){return e.setOpen(!1)},color:"primary",children:"No"})]})]})})}var U=n(211),A=n(207);function T(e){return Object(a.jsx)(A.a,Object(c.a)({elevation:6,variant:"filled"},e))}var z=Object(O.a)((function(e){return{root:{width:"100%","& > * + *":{marginTop:e.spacing(2)}}}}));function H(e){var t=z(),n=function(t,n){"clickaway"!==n&&e.setOpen(!1)};return Object(a.jsx)("div",{className:t.root,children:Object(a.jsx)(U.a,{open:e.open,autoHideDuration:3e3,onClose:n,children:Object(a.jsxs)(T,{onClose:n,severity:"success",children:[e.selRow.name," eliminado Exitosamente!"]})})})}function I(e){return Object(a.jsx)(A.a,Object(c.a)({elevation:6,variant:"filled"},e))}var J=Object(O.a)((function(e){return{root:{width:"100%","& > * + *":{marginTop:e.spacing(2)}}}}));function G(e){var t=J(),n=function(t,n){"clickaway"!==n&&e.setOpen(!1)};return Object(a.jsx)("div",{className:t.root,children:Object(a.jsx)(U.a,{open:e.open,autoHideDuration:3e3,onClose:n,children:Object(a.jsxs)(I,{onClose:n,severity:"info",children:[e.data.name," agregado exitosamente!"]})})})}function V(e){return Object(a.jsx)(A.a,Object(c.a)({elevation:6,variant:"filled"},e))}var B=Object(O.a)((function(e){return{root:{width:"100%","& > * + *":{marginTop:e.spacing(2)}}}}));function M(e){var t=B(),n=function(t,n){"clickaway"!==n&&e.setOpen(!1)};return Object(a.jsx)("div",{className:t.root,children:Object(a.jsx)(U.a,{open:e.open,autoHideDuration:3e3,onClose:n,children:Object(a.jsxs)(V,{onClose:n,severity:"info",children:[e.selRow.name," modificado exitosamente!"]})})})}function q(){var e=JSON.parse(localStorage.getItem("user"));return e?{Authorization:"Bearer ".concat(e)}:{}}var K="https://productsjwt.azurewebsites.net/",Q=K,W=n(25),X=Object(O.a)((function(e){return{root:{margin:2*e.spacing(1),padding:2*e.spacing(1),textAlign:"center"},progress:{margin:e.spacing(2)},mg:{margin:e.spacing(1)},contbutt:{paddingTop:e.spacing(2)}}}));function Y(e){var t=e.loading,n=X();return t?Object(a.jsx)(y.a,{className:n.progress}):null}t.default=function(){var e="".concat(Q,"productsbyuser/"),t={headers:q()},n=Object(j.useState)(!0),s=Object(l.a)(n,2),d=s[0],O=s[1],y=Object(j.useState)(!0),S=Object(l.a)(y,2),k=S[0],F=S[1],D=Object(j.useState)([]),P=Object(l.a)(D,2),E=P[0],U=P[1],A=Object(j.useState)([]),T=Object(l.a)(A,2),z=T[0],I=T[1],J=Object(j.useState)([{name:"ID",active:!1},{name:"Name",active:!1},{name:"Price",active:!1,numeric:!0},{name:"Reference",active:!1}]),V=Object(l.a)(J,2),B=V[0],K=(V[1],Object(j.useState)(!0)),Z=Object(l.a)(K,2),$=Z[0],_=Z[1],ee=Object(j.useState)(!1),te=Object(l.a)(ee,2),ne=te[0],ae=te[1],ce=Object(j.useState)(!1),re=Object(l.a)(ce,2),se=re[0],ie=re[1],oe=Object(j.useState)({name:"",price:"",reference:""}),le=Object(l.a)(oe,2),je=le[0],ue=le[1],de=Object(j.useState)(!1),be=Object(l.a)(de,2),Oe=be[0],me=be[1],fe=Object(j.useState)(!1),pe=Object(l.a)(fe,2),he=pe[0],xe=pe[1],ge=Object(j.useState)(!1),ve=Object(l.a)(ge,2),we=ve[0],Re=ve[1],ye=Object(j.useState)(!1),Se=Object(l.a)(ye,2),ke=Se[0],Ne=Se[1];Object(j.useEffect)(Object(o.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ce();case 2:_(!1);case 3:case"end":return e.stop()}}),e)}))),[]);var Ce=function(){var n=Object(o.a)(i.a.mark((function n(){return i.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,b.a.get(e,t).then((function(t){U(t.data),console.log(e)}));case 2:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}(),Fe=function(){return E.filter((function(e){return e.selected})).length},De=X(),Pe=Object(u.f)();return Object(a.jsx)(a.Fragment,{children:Object(a.jsxs)(w.a,{className:De.root,children:[Object(a.jsx)(v.a,{variant:"h4",id:"tableTitle",children:"(".concat(Fe(),") Productos Seleccionados")}),Object(a.jsxs)(f.a,{children:[Object(a.jsx)(x.a,{children:Object(a.jsx)(g.a,{children:B.map((function(e){return Object(a.jsx)(h.a,{children:e.name},e.name)}))})}),Object(a.jsx)(p.a,{children:E.map((function(e){return Object(a.jsxs)(g.a,{onClick:(t=e.id,function(){var e=Object(r.a)(E),n=E.findIndex((function(e){return e.id===t})),a=E[n];I(E[n]),e[n]=Object(c.a)(Object(c.a)({},a),{},{selected:!a.selected}),U(e),O(!1),F(!1),Fe()>0&&(F(!0),O(!0))}),selected:e.selected,children:[Object(a.jsx)(h.a,{component:"th",scope:"row",children:e.id}),Object(a.jsx)(h.a,{children:e.name}),Object(a.jsx)(h.a,{children:e.price}),Object(a.jsx)(h.a,{children:e.reference})]},e.id);var t}))})]}),Object(a.jsx)(Y,{className:De.root,loading:$}),Object(a.jsxs)(R.a,{className:De.contbutt,children:[Object(a.jsx)(m.a,{className:De.mg,variant:"contained",disabled:d,onClick:function(){ae(!1),ie(!1),me(!0)},children:"Eliminar"}),Object(a.jsx)(m.a,{className:De.mg,variant:"contained",disabled:k,onClick:function(){ie(!0),ae(!1)},children:"Editar"}),Object(a.jsx)(m.a,{className:De.mg,variant:"contained",onClick:function(){ae(!0),ie(!1)},children:"Nuevo"}),Object(a.jsx)(m.a,{className:De.mg,variant:"contained",color:"secondary",onClick:function(){W.a.logout(),Pe.push("/")},children:"Salir"})]}),ne?Object(a.jsx)(a.Fragment,{children:Object(a.jsx)(N,{setData:ue,data:je,setRows:U,rows:E,styles:De,setSnackAdd:Re,baseURL:e,header:t})}):null,se?Object(a.jsx)(a.Fragment,{children:Object(a.jsx)(C,{setSelRow:I,selRow:z,setRows:U,rows:E,styles:De,setSnackEdit:Ne,baseURL:e,header:t})}):null,Object(a.jsx)(a.Fragment,{children:Object(a.jsx)(L,{open:Oe,setOpen:me,setSnack:xe,rows:E,setRows:U,selRow:z,baseURL:e,header:t})}),Object(a.jsx)(a.Fragment,{children:Object(a.jsx)(G,{setSnack:Re,open:we,setOpen:Re,data:je})}),Object(a.jsx)(a.Fragment,{children:Object(a.jsx)(H,{setSnack:xe,open:he,setOpen:xe,selRow:z})}),Object(a.jsx)(a.Fragment,{children:Object(a.jsx)(M,{setSnack:Ne,open:ke,setOpen:Ne,selRow:z})})]})})}}}]);
//# sourceMappingURL=9.d2dd979b.chunk.js.map